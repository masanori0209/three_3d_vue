(function(e){function t(t){for(var o,a,r=t[0],c=t[1],l=t[2],d=0,u=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&u.push(n[a][0]),n[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);h&&h(t);while(u.length)u.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],o=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(o=!1)}o&&(s.splice(t--,1),e=a(a.s=i[0]))}return e}var o={},n={app:0},s=[];function a(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=o,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(i,o,function(t){return e[t]}.bind(null,o));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var h=c;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"0ac7":function(e,t,i){"use strict";var o=i("4919"),n=i.n(o);n.a},4919:function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var o=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},s=[],a=(i("5c0b"),i("2877")),r={},c=Object(a["a"])(r,n,s,!1,null,null,null),l=c.exports,h=i("8c4f"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home"},[e.isStart?i("StartMenu",{on:{startGame:e.startGame}}):e._e(),e.isStart||e.isGameOver?e._e():i("Main",{attrs:{score:e.score,colorHP:e.colorHP,isGameOver:e.isGameOver,isDebug:e.isDebug},on:{calcColor:e.calcColor,calcScore:e.calcScore,calcGameOver:e.calcGameOver}}),e.isGameOver?i("Result",{attrs:{score:e.score,colorHP:e.colorHP}}):e._e()],1)},u=[],p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"stage",staticClass:"back"},[i("div",{staticClass:"status"},[e.isDebug?i("p",[e._v(e._s(e.camera.position.x)+" - "+e._s(e.camera.position.y)+" - "+e._s(e.camera.position.z))]):e._e(),i("h2",{style:e.getColor()},[e._v("Score: "+e._s(e.score))]),i("p",[e._v("R: "),i("progress",{staticClass:"progress-red",attrs:{max:"255"},domProps:{value:e.colorHP.r}},[e._v(e._s(e.colorHP.r)+"%")])]),i("p",[e._v("G: "),i("progress",{staticClass:"progress-green",attrs:{max:"255"},domProps:{value:e.colorHP.g}},[e._v(e._s(e.colorHP.g)+"%")])]),i("p",[e._v("B: "),i("progress",{staticClass:"progress-blue",attrs:{max:"255"},domProps:{value:e.colorHP.b}},[e._v(e._s(e.colorHP.b)+"%")])])]),i("div",{staticClass:"action-menu"},[i("button",{on:{click:function(t){return e.move("left")}}},[e._v("←")]),i("button",{attrs:{disabled:e.isJumping},on:{click:function(t){return e.jump()}}},[e._v("Jump")]),i("button",{on:{click:function(t){return e.move("right")}}},[e._v("→")])]),i("KeyEvents",{attrs:{isJumping:e.isJumping},on:{jump:function(t){return e.jump()},move:function(t){return e.move(t,e.type)}}})],1)},m=[],f=i("5a89"),w=i("34ad"),g=i("627b"),v=10,b=300,M=new f["lb"],y=new f["Eb"]({alpha:!0,antialias:!0});y.setPixelRatio(window.devicePixelRatio),y.setSize(window.innerWidth,window.innerHeight),y.shadowMap.enabled=!0,y.shadowMap.type=f["Z"];var P=new f["ab"](45,window.innerWidth/window.innerHeight,1,2e3);P.position.set(10,7,15),P.lookAt(new f["Bb"](0,0,0));var x=new f["a"](16777215,.5),H=new f["l"](16777215,1,100);x.position.set(0,30,0),H.position.set(-2,20,20),H.castShadow=!0,H.shadow.mapSize.width=2048,H.shadow.mapSize.height=2048,H.shadow.camera.position.set(0,100,0),H.shadow.camera.left=-30,H.shadow.camera.right=30,H.shadow.camera.top=30,H.shadow.camera.bottom=-30;var _=new f["m"](H),S=new f["f"](10,200,b),O=new f["Q"]({color:16316664}),z=new f["O"](S,O);z.position.y=-99.95,z.receiveShadow=!0,z.castShadow=!0;for(var A=[new f["Bb"](0,-2,2),new f["Bb"](0,2,2),new f["Bb"](2,-2,-2),new f["Bb"](-2,-2,-2)],k=new f["Q"]({color:11141120}),E=[],C=0;C<v;C++)E.push(new f["O"](new g["a"](A),k));for(var j=[],R=0;R<v;R++)j.push(new f["O"](new f["vb"](1,.5,3,50),new f["P"]({color:11184640})));var B=new w["a"],G=new f["j"],J=i("4721"),X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"key"})},$=[],L={name:"KeyEvents",props:["isJumping"],data:function(){return{}},created:function(){window.addEventListener("keyup",this.handler)},beforeDestroy:function(){window.removeEventListener("keyup",this.handler)},methods:{handler:function(e){if(console.log(e.keyCode),!this.isJumping)switch(e.keyCode){case 32:this.$emit("jump");break;case 37:case 65:console.log("A"),this.$emit("move","left");break;case 39:case 68:console.log("D"),this.$emit("move","right");break;default:break}}}},D=L,N=(i("64fe"),Object(a["a"])(D,X,$,!1,null,"4e0520fa",null)),I=N.exports,W={name:"Three",components:{KeyEvents:I},props:["score","colorHP","isGameOver","isDebug"],data:function(){return{publicPath:"",MAXOBJ:v,MAXLEN:b,scene:M,renderer:y,camera:P,ambientlight:x,directlight:H,lightHelper:_,floor:z,deadzoneMesh:E,colorMesh:j,gltfloader:B,clock:G,mixer:null,player:null,controls:null,animations:null,isJumping:!1}},created:function(){window.innerWidth<500?(this.camera.position.set(4,11,21),this.camera.lookAt(new f["Bb"](0,0,0))):(this.camera.position.set(10,7,15),this.camera.lookAt(new f["Bb"](0,0,0))),this.scene.add(this.camera),this.scene.add(this.floor),this.scene.add(this.directlight),this.scene.add(this.ambientlight),this.isDebug&&this.scene.add(this.lightHelper),this.loadModel();for(var e=0;e<this.MAXOBJ;e++)this.deadzoneMesh[e].position.z-=this.getRandomInt(15,this.MAXLEN/2),this.deadzoneMesh[e].position.x=3*this.getRandomInt(-1,1),this.colorMesh[e].position.z-=this.getRandomInt(15,this.MAXLEN/2),this.colorMesh[e].position.x=3*this.getRandomInt(-1,1),this.colorMesh[e].position.y=4,this.colorMesh[e].material.color.set("rgb("+this.getRandomInt(0,255)+","+this.getRandomInt(0,255)+","+this.getRandomInt(0,255)+")"),this.deadzoneMesh[e].receiveShadow=!0,this.deadzoneMesh[e].castShadow=!0,this.colorMesh[e].receiveShadow=!0,this.colorMesh[e].castShadow=!0,this.scene.add(this.deadzoneMesh[e]),this.scene.add(this.colorMesh[e]),console.log(this.scene)},mounted:function(){this.startObj()},methods:{startObj:function(){this.$refs.stage.appendChild(this.renderer.domElement),this.isDebug&&(this.controls=new J["a"](this.camera,this.renderer.domElement),this.controls.update()),this.animate()},getColor:function(){return{color:"rgb("+(255-this.colorHP.r)+","+(255-this.colorHP.g)+","+(255-this.colorHP.b)+")"}},getRandomInt:function(e,t){return Math.floor(Math.random()*(t+1-e))+e},loadModel:function(){var e=this;this.gltfloader.load("".concat(this.publicPath,"model/stickman.glb"),(function(t){e.mixer=new f["c"](t.scene),console.log(t),e.player=t.scene,e.player.traverse((function(e){e instanceof f["O"]&&(e.castShadow=!0,e.receiveShadow=!0)})),e.player.useQuaternion=!0;var i=new f["gb"];i.setFromAxisAngle(new f["Bb"](0,1,0).normalize(),Math.PI),e.player.quaternion.copy(i),e.animations=t.animations,e.mixer.clipAction(t.animations[6]).play(),e.scene.add(e.player)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.error(e)}))},jump:function(){var e=this;this.mixer.stopAllAction();var t=this.mixer.clipAction(this.animations[0]);t.setLoop(f["J"]),t.clampWhenFinished=!0,t.play(),this.isJumping=!0,this.mixer.addEventListener("finished",(function(t){e.isJumping=!1,e.run()}))},run:function(){this.mixer.stopAllAction();var e=this.mixer.clipAction(this.animations[6]);e.play()},move:function(e){switch(e){case"left":this.player.position.x<=-3?this.player.position.x=-3:this.player.position.x-=3;break;case"right":this.player.position.x>=3?this.player.position.x=3:this.player.position.x+=3;break;default:break}},animate:function(){this.renderer.render(this.scene,this.camera),this.controls&&this.isDebug&&this.controls.update(),this.mixer&&this.mixer.update(this.clock.getDelta()),this.player&&this.mixer&&this.animations&&this.getResult();for(var e=0;e<this.MAXOBJ;e++)this.deadzoneMesh[e].position.z>=Math.floor(this.MAXLEN/4)?this.deadzoneMesh[e].position.z=-this.MAXLEN/4:this.deadzoneMesh[e].position.z+=.5,this.colorMesh[e].position.z>=Math.floor(this.MAXLEN/4)?this.colorMesh[e].position.z=-this.MAXLEN/4:this.colorMesh[e].position.z+=.5;requestAnimationFrame(this.animate)},getResult:function(){if(!this.isJumping)for(var e=0;e<this.MAXOBJ;e++)this.deadzoneMesh[e].position.z>=this.player.position.z-.2&&this.deadzoneMesh[e].position.z<=this.player.position.z+.2&&this.deadzoneMesh[e].position.x==this.player.position.x?this.$emit("calcGameOver"):this.deadzoneMesh[e].position.z>=Math.floor(this.MAXLEN/4)&&(this.deadzoneMesh[e].position.z=-this.MAXLEN/4+this.getRandomInt(-50,5));for(e=0;e<this.MAXOBJ;e++)this.colorMesh[e].position.z>=this.player.position.z-.2&&this.colorMesh[e].position.z<=this.player.position.z+.2&&this.colorMesh[e].position.x==this.player.position.x&&(this.$emit("calcColor",{r:Math.floor(20*this.colorMesh[e].material.color.r),g:Math.floor(20*this.colorMesh[e].material.color.g),b:Math.floor(20*this.colorMesh[e].material.color.b)}),this.colorMesh[e].position.z=-this.MAXLEN/4+this.getRandomInt(-50,5));this.$emit("calcScore")}}},F=W,Q=(i("8ce8"),Object(a["a"])(F,p,m,!1,null,"196a8bbe",null)),q=Q.exports,T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"stage",staticClass:"back",on:{click:function(t){return e.$emit("startGame")}}},[e._m(0)])},K=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"menu"},[i("h2",[e._v("Simple Action Game")]),i("p",{staticClass:"desc",staticStyle:{padding:"24px","text-align":"left"}},[e._v(" カラフルなドーナツ状のアイテムを取って、スコアをどんどんあげていこう！ 赤い三角の障害物に当たるとゲームオーバー。 色によってスコアが上昇、全ての色がMAXになるとゲームクリア。 ")]),i("div",{staticClass:"click-start"},[e._v(" クリックでスタート ")])])}],Z=10,U=300,V=new f["lb"],Y=new f["Eb"]({alpha:!0,antialias:!0});Y.setPixelRatio(window.devicePixelRatio),Y.setSize(window.innerWidth,window.innerHeight),Y.shadowMap.enabled=!0,Y.shadowMap.type=f["Z"];var ee=new f["ab"](45,window.innerWidth/window.innerHeight,1,2e3);ee.position.set(10,7,15),ee.lookAt(new f["Bb"](0,0,0));var te=new f["a"](16777215,.5),ie=new f["l"](16777215,1,100);te.position.set(0,30,0),ie.position.set(-2,20,20),ie.castShadow=!0,ie.shadow.mapSize.width=2048,ie.shadow.mapSize.height=2048,ie.shadow.camera.position.set(0,100,0),ie.shadow.camera.left=-30,ie.shadow.camera.right=30,ie.shadow.camera.top=30,ie.shadow.camera.bottom=-30;var oe=new f["m"](ie),ne=new f["f"](10,200,U),se=new f["Q"]({color:16316664}),ae=new f["O"](ne,se);ae.position.y=-99.95,ae.receiveShadow=!0,ae.castShadow=!0;var re=new w["a"],ce=new f["j"],le={name:"StartMenu",data:function(){return{publicPath:"",MAXOBJ:Z,MAXLEN:U,scene:V,renderer:Y,camera:ee,ambientlight:te,directlight:ie,lightHelper:oe,floor:ae,gltfloader:re,clock:ce,mixer:null,player:null,controls:null,animations:null}},created:function(){this.camera.position.set(0,12,20),this.camera.lookAt(new f["Bb"](0,0,0)),this.scene.add(this.camera),this.scene.add(this.floor),this.scene.add(this.directlight),this.scene.add(this.ambientlight),this.isDebug&&this.scene.add(this.lightHelper),this.loadModel()},mounted:function(){this.$refs.stage.appendChild(this.renderer.domElement),this.animate()},methods:{loadModel:function(){var e=this;this.gltfloader.load("".concat(this.publicPath,"model/stickman.glb"),(function(t){e.mixer=new f["c"](t.scene),console.log(t),e.player=t.scene,e.player.traverse((function(e){e instanceof f["O"]&&(e.castShadow=!0,e.receiveShadow=!0)})),e.animations=t.animations,e.mixer.clipAction(t.animations[2]).play(),e.scene.add(e.player)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.error(e)}))},animate:function(){this.renderer.render(this.scene,this.camera),this.mixer&&this.mixer.update(this.clock.getDelta()),requestAnimationFrame(this.animate)}}},he=le,de=(i("7306"),Object(a["a"])(he,T,K,!1,null,"b40083d6",null)),ue=de.exports,pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"stage",staticClass:"back"},[i("div",{staticClass:"retry"},[e.colorHP.r+e.colorHP.g+e.colorHP.b>=765?i("h2",[e._v("Game Clear")]):i("h2",[e._v("Game Over")]),i("h2",[e._v("Score: "+e._s(e.score))]),i("a",{staticClass:"retry-button",attrs:{href:"/"}},[e._v("Retry")])])])},me=[],fe=10,we=300,ge=new f["lb"],ve=new f["Eb"]({alpha:!0,antialias:!0});ve.setPixelRatio(window.devicePixelRatio),ve.setSize(window.innerWidth,window.innerHeight),ve.shadowMap.enabled=!0,ve.shadowMap.type=f["Z"];var be=new f["ab"](45,window.innerWidth/window.innerHeight,1,2e3);be.position.set(10,7,15),be.lookAt(new f["Bb"](0,0,0));var Me=new f["a"](16777215,.5),ye=new f["l"](16777215,1,100);Me.position.set(0,30,0),ye.position.set(-2,20,20),ye.castShadow=!0,ye.shadow.mapSize.width=2048,ye.shadow.mapSize.height=2048,ye.shadow.camera.position.set(0,100,0),ye.shadow.camera.left=-30,ye.shadow.camera.right=30,ye.shadow.camera.top=30,ye.shadow.camera.bottom=-30;var Pe=new f["m"](ye),xe=new f["f"](10,200,we),He=new f["Q"]({color:16316664}),_e=new f["O"](xe,He);_e.position.y=-99.95,_e.receiveShadow=!0,_e.castShadow=!0;var Se=new w["a"],Oe=new f["j"],ze={name:"Result",props:["score","colorHP"],data:function(){return{publicPath:"",MAXOBJ:fe,MAXLEN:we,scene:ge,renderer:ve,camera:be,ambientlight:Me,directlight:ye,lightHelper:Pe,floor:_e,gltfloader:Se,clock:Oe,mixer:null,player:null,controls:null,animations:null}},created:function(){this.camera.position.set(0,12,20),this.camera.lookAt(new f["Bb"](0,0,0)),this.scene.add(this.camera),this.scene.add(this.floor),this.scene.add(this.directlight),this.scene.add(this.ambientlight),this.isDebug&&this.scene.add(this.lightHelper),this.loadModel()},mounted:function(){this.$refs.stage.appendChild(this.renderer.domElement),this.animate()},methods:{loadModel:function(){var e=this;this.gltfloader.load("".concat(this.publicPath,"model/stickman.glb"),(function(t){e.mixer=new f["c"](t.scene),console.log(t),e.player=t.scene,e.player.traverse((function(e){e instanceof f["O"]&&(e.castShadow=!0,e.receiveShadow=!0)})),e.animations=t.animations,e.mixer.clipAction(t.animations[2]).play(),e.scene.add(e.player)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.error(e)}))},animate:function(){this.renderer.render(this.scene,this.camera),this.mixer&&this.mixer.update(this.clock.getDelta()),requestAnimationFrame(this.animate)}}},Ae=ze,ke=(i("0ac7"),Object(a["a"])(Ae,pe,me,!1,null,"43ac8ec7",null)),Ee=ke.exports,Ce={name:"home",components:{StartMenu:ue,Main:q,Result:Ee},data:function(){return{colorHP:{r:0,g:0,b:0},score:0,isGameOver:!1,isStart:!0,isDebug:!1}},methods:{calcColor:function(e){this.colorHP.r+=e.r,this.colorHP.g+=e.g,this.colorHP.b+=e.b,this.colorHP.r>=255&&(this.colorHP.r=255),this.colorHP.g>=255&&(this.colorHP.g=255),this.colorHP.b>=255&&(this.colorHP.b=255),this.colorHP.r<=0&&(this.colorHP.r=0),this.colorHP.g<=0&&(this.colorHP.g=0),this.colorHP.b<=0&&(this.colorHP.b=0),this.colorHP.r>=255&&this.colorHP.g>=255&&this.colorHP.b>=255&&this.calcGameOver()},calcScore:function(){this.score+=Math.floor(this.colorHP.r/100*1.5)+Math.floor(this.colorHP.g/100*1.5)+Math.floor(this.colorHP.b/100*1.5)+1},calcGameOver:function(){this.isGameOver=!0},startGame:function(){this.isStart=!1}}},je=Ce,Re=Object(a["a"])(je,d,u,!1,null,null,null),Be=Re.exports;o["a"].use(h["a"]);var Ge=[{path:"/",name:"home",component:Be}],Je=new h["a"]({mode:"history",base:"",routes:Ge}),Xe=Je;o["a"].config.productionTip=!1,new o["a"]({router:Xe,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";var o=i("9c0c"),n=i.n(o);n.a},"64fe":function(e,t,i){"use strict";var o=i("cbe3"),n=i.n(o);n.a},7306:function(e,t,i){"use strict";var o=i("e606"),n=i.n(o);n.a},"8ce8":function(e,t,i){"use strict";var o=i("de82"),n=i.n(o);n.a},"9c0c":function(e,t,i){},cbe3:function(e,t,i){},de82:function(e,t,i){},e606:function(e,t,i){}});
//# sourceMappingURL=app.485d001c.js.map